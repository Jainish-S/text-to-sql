┌──────┐          ┌───────────┐          ┌──────────┐          ┌──────────┐          ┌───────────┐          ┌────────────┐
│ User │          │ FastAPI   │          │ Schema   │          │ MCP      │          │ MCP       │          │ LLM        │
│      │          │ Backend   │          │ Extractor│          │ Client   │          │ Server    │          │ Provider   │
└──┬───┘          └─────┬─────┘          └────┬─────┘          └────┬─────┘          └─────┬─────┘          └─────┬──────┘
   │                    │                     │                     │                      │                       │
   │ 1. Send NL Query   │                     │                     │                      │                       │
   │ ───────────────────>                     │                     │                      │                       │
   │                    │                     │                     │                      │                       │
   │                    │ 2. Extract Schema   │                     │                      │                       │
   │                    │ ──────────────────>│                     │                      │                       │
   │                    │                     │                     │                      │                       │
   │                    │                     │ 3. Return Schema    │                      │                       │
   │                    │ <──────────────────│                     │                      │                       │
   │                    │                     │                     │                      │                       │
   │                    │ 4. Format Prompt with Schema             │                      │                       │
   │                    │ ──────────────────────────────────────>│                      │                       │
   │                    │                     │                     │                      │                       │
   │                    │                     │                     │ 5. Send MCP Request  │                       │
   │                    │                     │                     │ ────────────────────>                       │
   │                    │                     │                     │                      │                       │
   │                    │                     │                     │                      │ 6. Translate & Send   │
   │                    │                     │                     │                      │ ─────────────────────>
   │                    │                     │                     │                      │                       │
   │                    │                     │                     │                      │                       │
   │                    │                     │                     │                      │ 7. Return Generated SQL
   │                    │                     │                     │                      │ <─────────────────────
   │                    │                     │                     │                      │                       │
   │                    │                     │                     │ 8. Return SQL        │                       │
   │                    │                     │                     │ <────────────────────                       │
   │                    │                     │                     │                      │                       │
   │                    │ 9. Validate SQL     │                     │                      │                       │
   │                    │ <──────────────────────────────────────│                      │                       │
   │                    │                     │                     │                      │                       │
   │ 10. Return SQL     │                     │                     │                      │                       │
   │ <───────────────────                     │                     │                      │                       │
   │                    │                     │                     │                      │                       │
┌──┴───┐          ┌─────┴─────┐          ┌────┴─────┐          ┌────┴─────┐          ┌─────┴─────┐          ┌─────┴──────┐
│ User │          │ FastAPI   │          │ Schema   │          │ MCP      │          │ MCP       │          │ LLM        │
│      │          │ Backend   │          │ Extractor│          │ Client   │          │ Server    │          │ Provider   │
└──────┘          └───────────┘          └──────────┘          └──────────┘          └───────────┘          └────────────┘